import win.ui;
/*DSG{{*/
var winform = win.form(text="aardio form";right=337;bottom=699)
winform.add(
plus={cls="plus";left=12;top=45;right=312;bottom=685;z=2};
trackbar={cls="trackbar";left=12;top=10;right=291;bottom=40;max=255;min=0;z=1}
)
/*}}*/

winform.trackbar.pos = 127
//拖动滑块,修改二值化阈值
import cv2
var img = cv2.imread( "./images/Lena.jpg",0/*_CV2_IMREAD_GRAYSCALE*/ )
var bmp,err = img.toBitmap()
winform.plus.setForeground(bmp)
winform.trackbar.oncommand = function(id,event,pos){
	if( event == 8/*_SB_ENDSCROLL*/ ){
		winform.text = winform.trackbar.pos
		var thresh = winform.trackbar.pos
		var dst = cv2.threshold( img,thresh,255 )
		bmp,err = dst.toBitmap()
		winform.plus.setForeground(bmp)
		winform.plus.redraw()
	}
}

winform.show();
win.loopMessage();
return winform;